# å¦‚ä½•çœ‹åˆ° HEARTBEAT æé†’

## ğŸ“‹ ä¸¤ç§æé†’æ–¹å¼

ä½ çš„ Everything Claude Code æœ‰**ä¸¤ç§ç‹¬ç«‹çš„æé†’ç³»ç»Ÿ**ï¼š

### 1. Session-based Remindersï¼ˆHook æé†’ï¼‰

**è§¦å‘æ—¶æœºï¼š**
- âœ… **SessionStart** - æ¯æ¬¡å¯åŠ¨ Claude Code æ—¶
- âœ… **SessionEnd** - æ¯æ¬¡å…³é—­ Claude Code æ—¶

**å¦‚ä½•çœ‹åˆ°ï¼š**

#### æ–¹æ³• 1: æ­£å¸¸ä½¿ç”¨ Claude Code

```bash
# å¯åŠ¨ Claude Code
cd /path/to/your/project
claude

# ä½ ä¼šç«‹å³çœ‹åˆ°ï¼š
======================================================================
ğŸ’“ HEARTBEAT - ä»Šæ—¥ä»»åŠ¡æ¦‚è§ˆ
======================================================================
ğŸ“… æ—¥æœŸ: 2026-01-29

â° å®šæ—¶æé†’
  [ ] ğŸ’§ å–æ°´æé†’ï¼ˆæ¯30åˆ†é’Ÿï¼‰

ğŸ“… æ¯æ—¥æ£€æŸ¥
  [ ] æ£€æŸ¥ pnpm outdated
  [ ] è¿è¡Œ pnpm lint
  [ ] æŸ¥çœ‹ä»Šå¤©çš„ GitHub é€šçŸ¥
  [ ] è®°å½•ä»Šå¤©çš„é‡è¦å†³ç­–
======================================================================
```

**å…³é—­ä¼šè¯æ—¶ï¼š**
```bash
# åœ¨ Claude Code ä¸­è¾“å…¥
/exit

# æˆ–æŒ‰ Ctrl+D

# ä½ ä¼šçœ‹åˆ°ï¼š
======================================================================
ğŸ’“ HEARTBEAT - ä¼šè¯ç»“æŸæé†’
======================================================================
ğŸ“Š è¿˜æœ‰ 13 ä¸ªå¾…åŠä»»åŠ¡æœªå®Œæˆ

ğŸ”´ é«˜ä¼˜å…ˆçº§ä»»åŠ¡ï¼ˆæ¯æ—¥æ£€æŸ¥ï¼‰:
  1. æ£€æŸ¥ pnpm outdated
  2. è¿è¡Œ pnpm lint
  3. æŸ¥çœ‹ä»Šå¤©çš„ GitHub é€šçŸ¥

======================================================================
ğŸ’¡ ä¸‹æ¬¡ä¼šè¯æ—¶å°†å†æ¬¡æé†’
======================================================================
```

#### æ–¹æ³• 2: æŸ¥çœ‹å®Œæ•´çš„ SessionStart è¾“å‡º

å¦‚æœä»Šå¤©æ˜¯**ç¬¬ä¸€æ¬¡å¯åŠ¨** Claude Codeï¼Œä½ ä¼šçœ‹åˆ°å®Œæ•´çš„ä»»åŠ¡åˆ—è¡¨ï¼š

```bash
$ claude

======================================================================
ğŸ’“ HEARTBEAT - ä»Šæ—¥ä»»åŠ¡æ¦‚è§ˆ
======================================================================
ğŸ“… æ—¥æœŸ: 2026-01-29

â° å®šæ—¶æé†’
----------------------------------------------------------------------
  [ ] ğŸ’§ å–æ°´æé†’ï¼ˆæ¯30åˆ†é’Ÿï¼‰

ğŸ“… æ¯æ—¥æ£€æŸ¥
----------------------------------------------------------------------
  [ ] æ£€æŸ¥ pnpm outdated
  [ ] è¿è¡Œ pnpm lint
  [ ] æŸ¥çœ‹ä»Šå¤©çš„ GitHub é€šçŸ¥
  [ ] è®°å½•ä»Šå¤©çš„é‡è¦å†³ç­–

ğŸ“† æ¯å‘¨æ£€æŸ¥
----------------------------------------------------------------------
  [ ] æ›´æ–° README.md
  [ ] å®¡æŸ¥æœ€è¿‘çš„ä»£ç å˜æ›´
  [ ] æ¸…ç†æœªä½¿ç”¨çš„ä¾èµ–

ğŸ”„ æŒç»­å…³æ³¨
----------------------------------------------------------------------
  [ ] æ£€æŸ¥æ˜¯å¦æœ‰å®‰å…¨é—®é¢˜
  [ ] å…³æ³¨ Claude Code æ›´æ–°
  [ ] æµ‹è¯•æ–°åŠŸèƒ½

======================================================================
ğŸ’¡ æç¤º: ä½¿ç”¨ "node custom/scripts/heartbeat.js" æŸ¥çœ‹å®Œæ•´ä»»åŠ¡åˆ—è¡¨
======================================================================

# ç„¶åæ˜¯æ­£å¸¸çš„ Claude Code æç¤ºç¬¦
âŸ©
```

å¦‚æœä»Šå¤©æ˜¯**ç¬¬ 2+ æ¬¡å¯åŠ¨**ï¼Œä½ åªä¼šçœ‹åˆ°å¿«é€Ÿæé†’ï¼š

```bash
$ claude

ğŸ’“ HEARTBEAT: 13 ä¸ªå¾…åŠä»»åŠ¡åœ¨ HEARTBEAT.md ä¸­

âŸ©
```

#### æ–¹æ³• 3: æ‰‹åŠ¨è§¦å‘æŸ¥çœ‹

```bash
# æ¨¡æ‹Ÿ SessionStart
HEARTBEAT_MODE=start node custom/scripts/hooks/heartbeat-executor.js

# æ¨¡æ‹Ÿ SessionEnd
HEARTBEAT_MODE=end node custom/scripts/hooks/heartbeat-executor.js
```

### 2. Background Daemonï¼ˆå®šæ—¶å®ˆæŠ¤è¿›ç¨‹ï¼‰

**è§¦å‘æ—¶æœºï¼š**
- âœ… å®šæ—¶æ£€æŸ¥ï¼ˆé»˜è®¤æ¯ 30 åˆ†é’Ÿï¼‰
- âœ… ç‹¬ç«‹è¿è¡Œï¼Œä¸éœ€è¦æ‰“å¼€ Claude Code

**å¦‚ä½•çœ‹åˆ°ï¼š**

#### æŸ¥çœ‹æ—¥å¿—

```bash
# æ–¹æ³• 1: ä½¿ç”¨æœåŠ¡è„šæœ¬
./custom/scripts/heartbeat-service.sh logs

# æ–¹æ³• 2: ç›´æ¥æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶
tail -f ~/.heartbeat-daemon.log

# æ–¹æ³• 3: æŸ¥çœ‹æœ€è¿‘ 50 è¡Œ
tail -n 50 ~/.heartbeat-daemon.log
```

**æ—¥å¿—ç¤ºä¾‹ï¼š**
```
[2026-01-29T04:08:14.779Z] ğŸ’“ å¿ƒè·³å®ˆæŠ¤å¯åŠ¨
[2026-01-29T04:08:14.779Z] ğŸ’“ æé†’å‘é€: 13 ä¸ªå¾…åŠä»»åŠ¡
[2026-01-29T04:38:14.783Z] ğŸ’“ æé†’å‘é€: 13 ä¸ªå¾…åŠä»»åŠ¡
[2026-01-29T05:08:14.787Z] ğŸ’“ æé†’å‘é€: 12 ä¸ªå¾…åŠä»»åŠ¡
```

#### macOS ç³»ç»Ÿé€šçŸ¥

å®ˆæŠ¤è¿›ç¨‹ä¼šå‘é€ macOS é€šçŸ¥ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Everything Claude Code          â”‚
â”‚ ğŸ’“ å¿ƒè·³æé†’: 13 ä¸ªå¾…åŠä»»åŠ¡      â”‚
â”‚ æ‰“å¼€ HEARTBEAT.md æŸ¥çœ‹è¯¦æƒ…      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ç¡®ä¿é€šçŸ¥æƒé™ï¼š**
1. ç³»ç»Ÿåå¥½è®¾ç½® â†’ é€šçŸ¥ â†’ Node.js
2. ç¡®ä¿"å…è®¸é€šçŸ¥"å·²å¯ç”¨

#### æ£€æŸ¥å®ˆæŠ¤è¿›ç¨‹çŠ¶æ€

```bash
./custom/scripts/heartbeat-service.sh status
```

**è¾“å‡ºï¼š**
```
ğŸ’“ å¿ƒè·³å®ˆæŠ¤è¿è¡Œä¸­
ğŸ’“ PID: 54018
ğŸ’“ æ—¥å¿—: /Users/solariswu/.heartbeat-daemon.log
```

## ğŸ” å¯¹æ¯”ä¸¤ç§æ–¹å¼

| ç‰¹æ€§ | Session-based (Hook) | Background Daemon |
|------|----------------------|-------------------|
| **è§¦å‘æ—¶æœº** | å¯åŠ¨/å…³é—­ Claude Code | æ¯ 30 åˆ†é’Ÿï¼ˆå®šæ—¶ï¼‰ |
| **çœ‹åˆ°ä½ç½®** | ç»ˆç«¯è¾“å‡ºï¼ˆstderrï¼‰ | ç³»ç»Ÿé€šçŸ¥ + æ—¥å¿— |
| **éœ€è¦æ‰“å¼€ Claude Code** | âœ… æ˜¯ | âŒ å¦ |
| **å®Œæ•´ä»»åŠ¡åˆ—è¡¨** | âœ… SessionStart | âŒ ä»…é€šçŸ¥æ•°é‡ |
| **é«˜ä¼˜å…ˆçº§ä»»åŠ¡** | âœ… SessionEnd | âŒ ä»…é€šçŸ¥æ•°é‡ |
| **æŒç»­æé†’** | âŒ ä»…ä¼šè¯æ—¶ | âœ… 24/7 |

## ğŸ§ª å®é™…æµ‹è¯•

### æµ‹è¯• 1: SessionStart æé†’

```bash
# 1. å…³é—­å½“å‰ Claude Code ä¼šè¯ï¼ˆå¦‚æœåœ¨è¿è¡Œï¼‰
exit

# 2. å¯åŠ¨æ–°çš„ Claude Code ä¼šè¯
cd /Users/solariswu/PycharmProjects/memory-skill/everything-claude-code
claude

# 3. ä½ ä¼šç«‹å³çœ‹åˆ° HEARTBEAT æé†’
```

### æµ‹è¯• 2: SessionEnd æé†’

```bash
# 1. åœ¨ Claude Code ä¸­é€€å‡º
/exit
# æˆ–æŒ‰ Ctrl+D

# 2. ä½ ä¼šçœ‹åˆ°ä¼šè¯ç»“æŸæé†’
```

### æµ‹è¯• 3: å®ˆæŠ¤è¿›ç¨‹é€šçŸ¥

```bash
# 1. ç¡®ä¿å®ˆæŠ¤è¿›ç¨‹åœ¨è¿è¡Œ
./custom/scripts/heartbeat-service.sh status

# 2. æŸ¥çœ‹å®æ—¶æ—¥å¿—
tail -f ~/.heartbeat-daemon.log

# 3. ç­‰å¾… 30 åˆ†é’Ÿï¼ˆæˆ–é‡å¯å®ˆæŠ¤è¿›ç¨‹ï¼Œä½¿ç”¨çŸ­é—´éš”æµ‹è¯•ï¼‰
./custom/scripts/heartbeat-service.sh restart 0.5  # 30 ç§’é—´éš”

# 4. ä½ ä¼šçœ‹åˆ°æ—¥å¿—æ›´æ–°ï¼š
# [2026-01-29T...] ğŸ’“ æé†’å‘é€: 13 ä¸ªå¾…åŠä»»åŠ¡

# 5. macOS ä¼šå¼¹å‡ºç³»ç»Ÿé€šçŸ¥
```

## ğŸ’¡ æ¨èä½¿ç”¨æ–¹å¼

### æ—¥å¸¸å¼€å‘

```bash
# 1. ä½¿ç”¨ Hookï¼ˆSessionStart/SessionEndï¼‰
# - è‡ªåŠ¨åœ¨å¯åŠ¨/å…³é—­æ—¶æé†’
# - æ˜¾ç¤ºå®Œæ•´ä»»åŠ¡åˆ—è¡¨
# - æ— éœ€é¢å¤–é…ç½®

# 2. å¯åŠ¨å®ˆæŠ¤è¿›ç¨‹ï¼ˆå¯é€‰ï¼‰
./custom/scripts/heartbeat-service.sh start 30

# 3. ä¸¤è€…äº’è¡¥
# - Hook: ä¼šè¯æ—¶è¯¦ç»†æé†’
# - å®ˆæŠ¤è¿›ç¨‹: æŒç»­è·Ÿè¸ªä»»åŠ¡
```

### é‡è¦ä»»åŠ¡æœŸé—´

```bash
# 1. å‡å°‘å®ˆæŠ¤è¿›ç¨‹é—´éš”
./custom/scripts/heartbeat-service.sh restart 15

# 2. ä¾èµ– Hook çš„è¯¦ç»†æé†’
# - SessionStart: æŸ¥çœ‹ä»Šæ—¥æ‰€æœ‰ä»»åŠ¡
# - SessionEnd: å›é¡¾æœªå®Œæˆä»»åŠ¡

# 3. å®ˆæŠ¤è¿›ç¨‹æŒç»­æé†’
# - æ¯ 15 åˆ†é’Ÿå‘é€é€šçŸ¥
# - ç¡®ä¿ä¸ä¼šå¿˜è®°é‡è¦ä»»åŠ¡
```

## ğŸ› ï¸ æ•…éšœæ’é™¤

### é—®é¢˜ï¼šçœ‹ä¸åˆ° SessionStart æé†’

**æ£€æŸ¥ 1: hooks.json æ˜¯å¦æ­£ç¡®é…ç½®**

```bash
cat hooks/hooks.json | grep -A 5 "SessionStart"
```

**åº”è¯¥çœ‹åˆ°ï¼š**
```json
"SessionStart": [
  {
    "command": "node \"${CLAUDE_WORKSPACE}/custom/scripts/hooks/heartbeat-executor.js\"",
    "description": "Show today's tasks from HEARTBEAT.md"
  },
  ...
]
```

**æ£€æŸ¥ 2: HEARTBEAT.md æ˜¯å¦å­˜åœ¨**

```bash
ls -la .claude/personalities/HEARTBEAT.md
```

**æ£€æŸ¥ 3: æ‰‹åŠ¨æµ‹è¯•**

```bash
HEARTBEAT_MODE=start node custom/scripts/hooks/heartbeat-executor.js
```

### é—®é¢˜ï¼šçœ‹ä¸åˆ° SessionEnd æé†’

**æ£€æŸ¥ 1: hooks.json æ˜¯å¦æ­£ç¡®é…ç½®**

```bash
cat hooks/hooks.json | grep -A 5 "SessionEnd"
```

**åº”è¯¥çœ‹åˆ°ï¼š**
```json
"SessionEnd": [
  {
    "command": "HEARTBEAT_MODE=end node \"${CLAUDE_WORKSPACE}/custom/scripts/hooks/heartbeat-executor.js\"",
    "description": "Remind pending tasks from HEARTBEAT.md"
  },
  ...
]
```

**æ£€æŸ¥ 2: æ‰‹åŠ¨æµ‹è¯•**

```bash
HEARTBEAT_MODE=end node custom/scripts/hooks/heartbeat-executor.js
```

### é—®é¢˜ï¼šå®ˆæŠ¤è¿›ç¨‹æ²¡æœ‰é€šçŸ¥

**æ£€æŸ¥ 1: å®ˆæŠ¤è¿›ç¨‹æ˜¯å¦åœ¨è¿è¡Œ**

```bash
./custom/scripts/heartbeat-service.sh status
```

**æ£€æŸ¥ 2: æŸ¥çœ‹æ—¥å¿—**

```bash
./custom/scripts/heartbeat-service.sh logs
```

**æ£€æŸ¥ 3: macOS é€šçŸ¥æƒé™**

```bash
# ç³»ç»Ÿåå¥½è®¾ç½® â†’ é€šçŸ¥ â†’ Node.js
# ç¡®ä¿"å…è®¸é€šçŸ¥"å·²å¯ç”¨
```

**æ£€æŸ¥ 4: æ‰‹åŠ¨æµ‹è¯•é€šçŸ¥**

```bash
# macOS
osascript -e 'display notification "æµ‹è¯•é€šçŸ¥" with title "Everything Claude Code"'

# Linux
notify-send "Everything Claude Code" "æµ‹è¯•é€šçŸ¥"
```

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [HEARTBEAT-SYSTEM-GUIDE.md](HEARTBEAT-SYSTEM-GUIDE.md) - Session-based æé†’
- [HEARTBEAT-DAEMON-GUIDE.md](HEARTBEAT-DAEMON-GUIDE.md) - å®ˆæŠ¤è¿›ç¨‹å®Œæ•´æŒ‡å—

## ğŸ‰ æ€»ç»“

**Session-based Remindersï¼ˆHookï¼‰ï¼š**
- åœ¨ç»ˆç«¯è¾“å‡ºä¸­ç›´æ¥çœ‹åˆ°
- å¯åŠ¨ Claude Code æ—¶è‡ªåŠ¨æ˜¾ç¤º
- å…³é—­ Claude Code æ—¶è‡ªåŠ¨æ˜¾ç¤º
- æ˜¾ç¤ºå®Œæ•´çš„ä»»åŠ¡åˆ—è¡¨å’Œé«˜ä¼˜å…ˆçº§ä»»åŠ¡

**Background Daemonï¼š**
- åœ¨ç³»ç»Ÿé€šçŸ¥ä¸­çœ‹åˆ°
- åœ¨æ—¥å¿—æ–‡ä»¶ä¸­è®°å½•
- æ¯ 30 åˆ†é’Ÿè‡ªåŠ¨å‘é€ï¼ˆå¯é…ç½®ï¼‰
- ä¸éœ€è¦æ‰“å¼€ Claude Code

**æ¨èï¼šä¸¤è€…åŒæ—¶ä½¿ç”¨ï¼**

---

*æœ€åæ›´æ–°: 2026-01-29*
